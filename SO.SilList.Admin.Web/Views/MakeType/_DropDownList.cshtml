@model SO.SilList.Manager.Models.ValueObjects.MakeTypeVo
<script>
    function updateModelList( obj) {
        if (document.getElementById("modelList")) {

            //xmlhttp = new XMLHttpRequest();
            //xmlhttp.onreadystatechange = function () {
            //    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            //        document.getElementById("modelList").innerHTML = xmlhttp.responseText;
            //    }
            //}
            //xmlhttp.open('POST', "/ModelType/DropDownList?_makeTypeId=" + obj.options[obj.selectedIndex].value);
            //xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

            //xmlhttp.send();
            var propertyName = "model";
            if ("@ViewBag.propertyName".indexOf("Type") > 0)
                propertyName = "modelTypeId";
            if ("@ViewBag.propertyName".indexOf(".")>0)
                propertyName = "car." + propertyName;
            $.post("/ModelType/DropDownList?_makeTypeId=" + obj.options[obj.selectedIndex].value + "&propertyName=" + propertyName + "&defaultValue=@ViewBag.defaultValue",
                function (data) {

                    $('#modelList').html(data);

                }
            );
        }
    }
</script>

@Html.DropDownList((string)ViewBag.propertyName, new SelectList(ViewBag.makes,"makeTypeId","name",Model.makeTypeId),(string)ViewBag.defaultValue, new { onChange = "updateModelList(this)" })